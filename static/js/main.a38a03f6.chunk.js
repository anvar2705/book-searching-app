(this["webpackJsonpbook-searching-app"]=this["webpackJsonpbook-searching-app"]||[]).push([[0],{15:function(e,t,a){e.exports={link:"BookItem_link__kk2fD",bookItem:"BookItem_bookItem__1CrAH",bookItem__wrapper:"BookItem_bookItem__wrapper__3ccO-",bookItem__info:"BookItem_bookItem__info__2WDtF",bookItem__image:"BookItem_bookItem__image__kpJCF",bookItem__authors:"BookItem_bookItem__authors__2JH5z",bookItem__title:"BookItem_bookItem__title__10F2G",bookItem__categories:"BookItem_bookItem__categories__1Nfm7"}},16:function(e,t,a){e.exports={form:"InputMain_form__3tPzS",form__field:"InputMain_form__field__3zPFi",form__input:"InputMain_form__input__2HfAs",form__btn:"InputMain_form__btn__2tzvp",form__selects:"InputMain_form__selects__2gIJ6",form__selectItem:"InputMain_form__selectItem__2ExTJ"}},17:function(e,t,a){e.exports={bookPage:"BookPage_bookPage__18ius",bookPage__image:"BookPage_bookPage__image__2IP6l",bookPage__info:"BookPage_bookPage__info__WoGd4",bookPage__categories:"BookPage_bookPage__categories__1MsVE",bookPage__title:"BookPage_bookPage__title__2nGYx",bookPage__authors:"BookPage_bookPage__authors__1NDdT",bookPage__description:"BookPage_bookPage__description__2XNfX"}},29:function(e,t,a){e.exports={app:"App_app__3rQWW",app__preloader:"App_app__preloader__Snbtl",app__content:"App_app__content__W0vPQ"}},30:function(e,t,a){e.exports={root:"InputCustom_root__2Z8oD",input:"InputCustom_input__3cAbd",label:"InputCustom_label__1ClHG"}},31:function(e,t,a){e.exports={search:"Search_search__164Uu",search__title:"Search_search__title__30XL3",search__input:"Search_search__input__3hyIl"}},32:function(e,t,a){e.exports={searchResult:"SearchResult_searchResult__133XH",searchResult__grid:"SearchResult_searchResult__grid__zunYp",searchResult__count:"SearchResult_searchResult__count__PjKnh"}},36:function(e,t,a){e.exports={parent:"Preloader_parent__16NoQ",preloader:"Preloader_preloader__1uu2-"}},45:function(e,t,a){e.exports={buttonCustom:"ButtonCustom_buttonCustom__3ss83"}},54:function(e,t,a){},80:function(e,t,a){"use strict";a.r(t);var c=a(0),o=a(26),n=a.n(o),r=(a(54),a(29)),s=a.n(r),i=a(2),l=a(49),u=a(16),_=a.n(u),h=a(28),d=a(30),b=a.n(d),j=a(1),m=Object(c.forwardRef)((function(e,t){var a=e.children,c=Object(h.a)(e,["children"]);return Object(j.jsxs)("div",{className:b.a.root,children:[Object(j.jsx)("input",Object(i.a)({ref:t,className:b.a.input,placeholder:" "},c)),Object(j.jsx)("label",{className:b.a.label,children:a})]})})),g=a(45),p=a.n(g),f=function(e){var t=e.children,a=Object(h.a)(e,["children"]);return Object(j.jsx)("button",Object(i.a)(Object(i.a)({className:p.a.buttonCustom},a),{},{children:t}))},O=a(5),k=function(e){var t=e.search.value,a=e.search.category,c=e.search.sortingBy,o=e.paginationStep,n=Object(O.f)(),r=Object(l.a)(),s=r.register,u=r.handleSubmit,h=r.watch;r.formState.errors;return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("form",{onSubmit:u((function(){t?(e.clearSearchResult(),n.push("/"),e.getSearchResultThunk(t,o,0,c,a),e.setStartIndex(o)):alert("Please, fill the search field")})),onChange:function(){e.setSearchValue(h("value"),h("category"),h("sortingBy"))},className:_.a.form,children:[Object(j.jsxs)("div",{className:_.a.form__field,children:[Object(j.jsx)("div",{className:_.a.form__input,children:Object(j.jsx)(m,Object(i.a)(Object(i.a)({},s("value")),{},{children:"Search books"}))}),Object(j.jsx)("div",{className:_.a.form__btn,children:Object(j.jsx)(f,{children:"search"})})]}),Object(j.jsxs)("div",{className:_.a.form__selects,children:[Object(j.jsxs)("div",{className:_.a.form__selectItem,children:[Object(j.jsx)("label",{htmlFor:"category",children:"Categories"}),Object(j.jsxs)("select",Object(i.a)(Object(i.a)({},s("category")),{},{defaultValue:"all",id:"category",children:[Object(j.jsx)("option",{value:"all",children:"all"}),Object(j.jsx)("option",{value:"art",children:"art"}),Object(j.jsx)("option",{value:"biography",children:"biography"}),Object(j.jsx)("option",{value:"computers",children:"computers"}),Object(j.jsx)("option",{value:"history",children:"history"}),Object(j.jsx)("option",{value:"medical",children:"medical"}),Object(j.jsx)("option",{value:"poetry",children:"poetry"})]}))]}),Object(j.jsxs)("div",{className:_.a.form__selectItem,children:[Object(j.jsx)("label",{htmlFor:"sortingBy",children:"Sorting by"}),Object(j.jsxs)("select",Object(i.a)(Object(i.a)({},s("sortingBy")),{},{defaultValue:"relevance",id:"sortingBy",children:[Object(j.jsx)("option",{value:"relevance",children:"relevance"}),Object(j.jsx)("option",{value:"newest",children:"newest"})]}))]})]})]})})},x=a(13),v=a(6),I=a(3),S=a.n(I),P=a(7),R=a(47),y="AIzaSyC5KlSUx4PPq_8tBqhB6sdC-lqZIxcNXAw",N=R.create({baseURL:"https://www.googleapis.com/books/v1/volumes",headers:{}}),E=function(e,t,a,c,o){return"all"===o?N.get("?q=".concat(e,"&key=").concat(y,"&maxResults=").concat(t,"&startIndex=").concat(a,"&orderBy=").concat(c)):N.get("?q=".concat(e,"+subject:").concat(o,"&key=").concat(y,"&maxResults=").concat(t,"&startIndex=").concat(a,"&orderBy=").concat(c))},B=function(e){return N.get("/".concat(e))},F="book-searching/content-reducer/SET_SEARCH_RESULT",T="book-searching/content-reducer/CLEAR_SEARCH_RESULT",C="book-searching/content-reducer/SET_SEARCH_VALUE",w="book-searching/content-reducer/SET_SEARCH_COUNT",A="book-searching/content-reducer/SET_START_INDEX",L="book-searching/content-reducer/SET_FETCHING",D="book-searching/content-reducer/SET_PRELOADER",H="book-searching/content-reducer/SET_STOP_FETCHING",V="book-searching/content-reducer/SET_SEARCH_FINISHED",M={search:{value:"",category:"",sortingBy:""},totalItems:null,preloader:!1,fetching:!1,stopFetching:!1,startIndex:0,paginationStep:30,items:[],searchFinished:!1},U=function(e){return{type:A,startIndex:e}},X=function(e){return{type:L,status:e}},z=function(e){return{type:D,status:e}},G=function(e){return{type:V,status:e}},J=function(e,t,a,c,o){return function(){var n=Object(P.a)(S.a.mark((function n(r){var s;return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(z(!0)),n.next=3,E(e,t,a,c,o);case 3:(s=n.sent).data&&(r((l=s.data.items,{type:F,items:l})),r((i=s.data.totalItems,{type:w,count:i})),s.data.items.length<t&&r({type:H,status:!0})),r(z(!1)),r(X(!1)),r(G(!0));case 8:case"end":return n.stop()}var i,l}),n)})));return function(e){return n.apply(this,arguments)}}()},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return Object(i.a)(Object(i.a)({},e),{},{search:Object(i.a)(Object(i.a)({},e.search),{},{value:t.value,category:t.category,sortingBy:t.sortingBy})});case F:return Object(i.a)(Object(i.a)({},e),{},{items:[].concat(Object(v.a)(e.items),Object(v.a)(t.items))});case T:return Object(i.a)(Object(i.a)({},e),{},{items:[],startIndex:0,searchFinished:!1});case w:return Object(i.a)(Object(i.a)({},e),{},{totalItems:t.count});case A:return Object(i.a)(Object(i.a)({},e),{},{startIndex:t.startIndex});case L:return Object(i.a)(Object(i.a)({},e),{},{fetching:t.status});case H:return Object(i.a)(Object(i.a)({},e),{},{stopFetching:t.status});case D:return Object(i.a)(Object(i.a)({},e),{},{preloader:t.status});case V:return Object(i.a)(Object(i.a)({},e),{},{searchFinished:t.status});default:return e}},W=a(31),K=a.n(W),Q={setSearchValue:function(e,t,a){return{type:C,value:e,category:t,sortingBy:a}},getSearchResultThunk:J,setStartIndex:U,clearSearchResult:function(){return{type:T}},setPreloader:z,setFetching:X},Y=Object(x.b)((function(e){return{search:e.searchResultPage.search,startIndex:e.searchResultPage.startIndex,paginationStep:e.searchResultPage.paginationStep,stopFetching:e.searchResultPage.stopFetching}}),Q)((function(e){return Object(j.jsxs)("div",{className:K.a.search,children:[Object(j.jsx)("div",{className:K.a.search__title,children:"Book Search App"}),Object(j.jsx)("div",{className:K.a.search__input,children:Object(j.jsx)(k,{search:e.search,setSearchValue:e.setSearchValue,getSearchResultThunk:e.getSearchResultThunk,startIndex:e.startIndex,paginationStep:e.paginationStep,setStartIndex:e.setStartIndex,clearSearchResult:e.clearSearchResult,setPreloader:e.setPreloader,setFetching:e.setFetching,stopFetching:e.stopFetching})})]})})),Z=a.p+"static/media/preloader.ce3cfbdd.gif",$=a(36),ee=a.n($),te=function(e){return Object(j.jsx)("div",{className:ee.a.parent,children:Object(j.jsx)("img",{src:Z,className:ee.a.preloader})})},ae=a(20),ce=a(18),oe=a(48),ne="book-searching/bookPage-reducer/SET_BOOK_DATA",re="book-searching/bookPage-reducer/SET_PRELOADER",se={bookData:{volumeInfo:{title:"",authors:[],description:"",categories:[],imageLinks:{}}},preloader:!1},ie=function(e){return{type:re,status:e}},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ne:return Object(i.a)(Object(i.a)({},e),{},{bookData:t.data});case re:return Object(i.a)(Object(i.a)({},e),{},{preloader:t.status});default:return e}},ue=Object(ce.b)({searchResultPage:q,bookPage:le}),_e=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ce.c,he=Object(ce.d)(ue,_e(Object(ce.a)(oe.a))),de=he;window.store=he;var be=a(17),je=a.n(be),me=a.p+"static/media/noImage.9f5d0730.png",ge={getBookDataThunk:function(e){return function(){var t=Object(P.a)(S.a.mark((function t(a){var c;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(ie(!0)),t.next=3,B(e);case 3:(c=t.sent).data.id?a((o=c.data,{type:ne,data:o})):alert(c.error.message),a(ie(!1));case 6:case"end":return t.stop()}var o}),t)})));return function(e){return t.apply(this,arguments)}}()}},pe=Object(ce.c)(Object(x.b)((function(e){return{volumeInfo:e.bookPage.bookData.volumeInfo}}),ge),O.g)((function(e){var t,a=e.match.params.id,o=e.volumeInfo.categories?e.volumeInfo.categories.join("/"):"no category",n=e.volumeInfo.title?e.volumeInfo.title:"no title",r=e.volumeInfo.authors?e.volumeInfo.authors.join(", "):"no authors",s=e.volumeInfo.description?e.volumeInfo.description:"no description";return t=e.volumeInfo.imageLinks&&e.volumeInfo.imageLinks.medium?e.volumeInfo.imageLinks.medium:me,Object(c.useEffect)((function(){e.getBookDataThunk(a)}),[]),Object(j.jsxs)("div",{className:je.a.bookPage,children:[Object(j.jsx)("div",{className:je.a.bookPage__image,children:Object(j.jsx)("img",{src:t,alt:"book-image"})}),Object(j.jsxs)("div",{className:je.a.bookPage__info,children:[Object(j.jsx)("div",{className:je.a.bookPage__categories,children:o}),Object(j.jsx)("div",{className:je.a.bookPage__title,children:n}),Object(j.jsx)("div",{className:je.a.bookPage__authors,children:r}),Object(j.jsx)("div",{className:je.a.bookPage__description,children:s})]})]})})),fe=a(15),Oe=a.n(fe),ke=function(e){var t,a;return t=e.title.length<58?e.title:e.title.slice(0,58)+"...",a=e.authors.length<80?e.authors:e.authors.slice(0,80)+"...",Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(ae.b,{to:"/book"+e.id,className:Oe.a.link,children:Object(j.jsx)("div",{className:Oe.a.bookItem,children:Object(j.jsxs)("div",{className:Oe.a.bookItem__wrapper,children:[Object(j.jsxs)("div",{className:Oe.a.bookItem__info,children:[Object(j.jsx)("div",{className:Oe.a.bookItem__image,children:Object(j.jsx)("img",{src:e.image})}),Object(j.jsx)("div",{className:Oe.a.bookItem__authors,children:a}),Object(j.jsx)("div",{className:Oe.a.bookItem__title,children:t})]}),Object(j.jsx)("div",{className:Oe.a.bookItem__categories,children:e.category})]})})})})},xe=a(32),ve=a.n(xe),Ie={getSearchResultThunk:J,setStartIndex:U,setFetching:X},Se=Object(x.b)((function(e){return{items:e.searchResultPage.items,totalItems:e.searchResultPage.totalItems,search:e.searchResultPage.search,startIndex:e.searchResultPage.startIndex,paginationStep:e.searchResultPage.paginationStep,fetching:e.searchResultPage.fetching,preloader:e.searchResultPage.preloader,stopFetching:e.searchResultPage.stopFetching,searchFinished:e.searchResultPage.searchFinished}}),Ie)((function(e){var t=e.search.value,a=e.search.category,o=e.search.sortingBy,n=e.items.map((function(e){return Object(j.jsx)("div",{children:Object(j.jsx)(ke,{image:e.volumeInfo.imageLinks?e.volumeInfo.imageLinks.thumbnail:null,category:e.volumeInfo.categories?e.volumeInfo.categories[0]:"",title:e.volumeInfo.title?e.volumeInfo.title:"",authors:e.volumeInfo.authors?e.volumeInfo.authors.join(", "):"",id:e.id})},e.etag)}));Object(c.useEffect)((function(){return document.addEventListener("scroll",r),function(){document.removeEventListener("scroll",r)}}),[]);var r=function(){document.documentElement.getBoundingClientRect().bottom<document.documentElement.clientHeight+100&&e.setFetching(!0)};return Object(c.useEffect)((function(){e.fetching&&!e.stopFetching&&(e.getSearchResultThunk(t,e.paginationStep,e.startIndex,o,a),e.setStartIndex(e.startIndex+e.paginationStep))}),[e.fetching]),Object(j.jsxs)("div",{className:ve.a.searchResult,children:[e.searchFinished?Object(j.jsxs)("div",{className:ve.a.searchResult__count,children:["Found ",e.totalItems," results"]}):null,Object(j.jsx)("div",{className:ve.a.searchResult__grid,children:n})]})})),Pe=Object(x.b)((function(e){return{preloaderContent:e.searchResultPage.preloader,preloaderBookPage:e.bookPage.preloader}}),null)((function(e){return Object(j.jsxs)("div",{className:s.a.app,children:[e.preloaderContent||e.preloaderBookPage?Object(j.jsx)("div",{className:s.a.app__preloader,children:Object(j.jsx)(te,{})}):null,Object(j.jsx)(Y,{}),Object(j.jsx)("div",{className:s.a.app__content,children:Object(j.jsxs)(O.c,{children:[Object(j.jsx)(O.a,{exact:!0,path:"/",render:function(){return Object(j.jsx)(Se,{})}}),Object(j.jsx)(O.a,{path:"/book:id?",render:function(){return Object(j.jsx)(pe,{})}})]})})]})})),Re=function(){return Object(j.jsx)(ae.a,{children:Object(j.jsx)(x.a,{store:de,children:Object(j.jsx)(Pe,{})})})},ye=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,81)).then((function(t){var a=t.getCLS,c=t.getFID,o=t.getFCP,n=t.getLCP,r=t.getTTFB;a(e),c(e),o(e),n(e),r(e)}))};n.a.render(Object(j.jsx)(Re,{}),document.getElementById("root")),ye()}},[[80,1,2]]]);
//# sourceMappingURL=main.a38a03f6.chunk.js.map