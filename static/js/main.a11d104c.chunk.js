(this["webpackJsonpbook-searching-app"]=this["webpackJsonpbook-searching-app"]||[]).push([[0],{15:function(e,t,a){e.exports={link:"BookItem_link__kk2fD",bookItem:"BookItem_bookItem__1CrAH",bookItem__wrapper:"BookItem_bookItem__wrapper__3ccO-",bookItem__info:"BookItem_bookItem__info__2WDtF",bookItem__image:"BookItem_bookItem__image__kpJCF",bookItem__authors:"BookItem_bookItem__authors__2JH5z",bookItem__title:"BookItem_bookItem__title__10F2G",bookItem__categories:"BookItem_bookItem__categories__1Nfm7"}},16:function(e,t,a){e.exports={form:"InputMain_form__3tPzS",form__field:"InputMain_form__field__3zPFi",form__input:"InputMain_form__input__2HfAs",form__btn:"InputMain_form__btn__2tzvp",form__selects:"InputMain_form__selects__2gIJ6",form__selectItem:"InputMain_form__selectItem__2ExTJ"}},17:function(e,t,a){e.exports={bookPage:"BookPage_bookPage__18ius",bookPage__image:"BookPage_bookPage__image__2IP6l",bookPage__info:"BookPage_bookPage__info__WoGd4",bookPage__categories:"BookPage_bookPage__categories__1MsVE",bookPage__title:"BookPage_bookPage__title__2nGYx",bookPage__authors:"BookPage_bookPage__authors__1NDdT",bookPage__description:"BookPage_bookPage__description__2XNfX"}},29:function(e,t,a){e.exports={app:"App_app__3rQWW",app__preloader:"App_app__preloader__Snbtl",app__content:"App_app__content__W0vPQ"}},30:function(e,t,a){e.exports={root:"InputCustom_root__2Z8oD",input:"InputCustom_input__3cAbd",label:"InputCustom_label__1ClHG"}},31:function(e,t,a){e.exports={search:"Search_search__164Uu",search__title:"Search_search__title__30XL3",search__input:"Search_search__input__3hyIl"}},32:function(e,t,a){e.exports={searchResult:"SearchResult_searchResult__133XH",searchResult__grid:"SearchResult_searchResult__grid__zunYp",searchResult__count:"SearchResult_searchResult__count__PjKnh"}},36:function(e,t,a){e.exports={parent:"Preloader_parent__16NoQ",preloader:"Preloader_preloader__1uu2-"}},45:function(e,t,a){e.exports={buttonCustom:"ButtonCustom_buttonCustom__3ss83"}},54:function(e,t,a){},80:function(e,t,a){"use strict";a.r(t);var r=a(0),o=a(26),c=a.n(o),n=(a(54),a(29)),s=a.n(n),i=a(2),l=a(49),u=a(16),_=a.n(u),h=a(28),d=a(30),b=a.n(d),g=a(1),j=Object(r.forwardRef)((function(e,t){var a=e.children,r=Object(h.a)(e,["children"]);return Object(g.jsxs)("div",{className:b.a.root,children:[Object(g.jsx)("input",Object(i.a)({ref:t,className:b.a.input,placeholder:" "},r)),Object(g.jsx)("label",{className:b.a.label,children:a})]})})),m=a(45),p=a.n(m),f=function(e){var t=e.children,a=Object(h.a)(e,["children"]);return Object(g.jsx)("button",Object(i.a)(Object(i.a)({className:p.a.buttonCustom},a),{},{children:t}))},O=a(5),k=function(e){var t=e.search.value,a=e.search.category,r=e.search.sortingBy,o=e.paginationStep,c=Object(O.f)(),n=Object(l.a)(),s=n.register,u=n.handleSubmit,h=n.watch;n.formState.errors;return Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("form",{onSubmit:u((function(){t?(e.clearSearchResult(),c.push("/"),e.getSearchResultThunk(t,o,0,r,a),e.setStartIndex(o)):alert("Please, fill the search field")})),onChange:function(){e.setSearchValue(h("value"),h("category"),h("sortingBy"))},className:_.a.form,children:[Object(g.jsxs)("div",{className:_.a.form__field,children:[Object(g.jsx)("div",{className:_.a.form__input,children:Object(g.jsx)(j,Object(i.a)(Object(i.a)({},s("value")),{},{children:"Search books"}))}),Object(g.jsx)("div",{className:_.a.form__btn,children:Object(g.jsx)(f,{children:"search"})})]}),Object(g.jsxs)("div",{className:_.a.form__selects,children:[Object(g.jsxs)("div",{className:_.a.form__selectItem,children:[Object(g.jsx)("label",{htmlFor:"category",children:"Categories"}),Object(g.jsxs)("select",Object(i.a)(Object(i.a)({},s("category")),{},{defaultValue:"all",id:"category",children:[Object(g.jsx)("option",{value:"all",children:"all"}),Object(g.jsx)("option",{value:"art",children:"art"}),Object(g.jsx)("option",{value:"biography",children:"biography"}),Object(g.jsx)("option",{value:"computers",children:"computers"}),Object(g.jsx)("option",{value:"history",children:"history"}),Object(g.jsx)("option",{value:"medical",children:"medical"}),Object(g.jsx)("option",{value:"poetry",children:"poetry"})]}))]}),Object(g.jsxs)("div",{className:_.a.form__selectItem,children:[Object(g.jsx)("label",{htmlFor:"sortingBy",children:"Sorting by"}),Object(g.jsxs)("select",Object(i.a)(Object(i.a)({},s("sortingBy")),{},{defaultValue:"relevance",id:"sortingBy",children:[Object(g.jsx)("option",{value:"relevance",children:"relevance"}),Object(g.jsx)("option",{value:"newest",children:"newest"})]}))]})]})]})})},x=a(13),v=a(6),I=a(3),S=a.n(I),P=a(7),R=a(47),y="AIzaSyC5KlSUx4PPq_8tBqhB6sdC-lqZIxcNXAw",N=R.create({baseURL:"https://www.googleapis.com/books/v1/volumes",headers:{}}),E=function(e,t,a,r,o){return"all"===o?N.get("?q=".concat(e,"&key=").concat(y,"&maxResults=").concat(t,"&startIndex=").concat(a,"&orderBy=").concat(r)):N.get("?q=".concat(e,"+subject:").concat(o,"&key=").concat(y,"&maxResults=").concat(t,"&startIndex=").concat(a,"&orderBy=").concat(r))},B=function(e){return N.get("/".concat(e))},F="book-searching/content-reducer/SET_SEARCH_RESULT",T="book-searching/content-reducer/CLEAR_SEARCH_RESULT",C="book-searching/content-reducer/SET_SEARCH_VALUE",w="book-searching/content-reducer/SET_SEARCH_COUNT",A="book-searching/content-reducer/SET_START_INDEX",L="book-searching/content-reducer/SET_FETCHING",D="book-searching/content-reducer/SET_PRELOADER",H="book-searching/content-reducer/SET_STOP_FETCHING",G="book-searching/content-reducer/SET_SEARCH_FINISHED",V="book-searching/content-reducer/SET_ERROR",M={search:{value:"",category:"",sortingBy:""},totalItems:null,preloader:!1,fetching:!1,stopFetching:!1,startIndex:0,paginationStep:30,items:[],searchFinished:!1,error:""},U=function(e){return{type:w,count:e}},X=function(e){return{type:A,startIndex:e}},z=function(e){return{type:L,status:e}},J=function(e){return{type:D,status:e}},q=function(e){return{type:G,status:e}},W=function(e,t,a,r,o){return function(){var c=Object(P.a)(S.a.mark((function c(n){var s,i;return S.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return n(J(!0)),c.prev=1,c.next=4,E(e,t,a,r,o);case 4:(s=c.sent).data&&(0!==s.data.totalItems?(n((l=s.data.items,{type:F,items:l})),n(U(s.data.totalItems)),s.data.items.length<t&&n({type:H,status:!0})):n(U(s.data.totalItems)),n(J(!1)),n(z(!1)),n(q(!0))),c.next=13;break;case 8:c.prev=8,c.t0=c.catch(1),n(J(!1)),i=c.t0.response.data.error.message,n({type:V,error:i});case 13:case"end":return c.stop()}var l}),c,null,[[1,8]])})));return function(e){return c.apply(this,arguments)}}()},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return Object(i.a)(Object(i.a)({},e),{},{search:Object(i.a)(Object(i.a)({},e.search),{},{value:t.value,category:t.category,sortingBy:t.sortingBy})});case F:return Object(i.a)(Object(i.a)({},e),{},{items:[].concat(Object(v.a)(e.items),Object(v.a)(t.items))});case T:return Object(i.a)(Object(i.a)({},e),{},{items:[],startIndex:0,searchFinished:!1});case w:return Object(i.a)(Object(i.a)({},e),{},{totalItems:t.count});case A:return Object(i.a)(Object(i.a)({},e),{},{startIndex:t.startIndex});case L:return Object(i.a)(Object(i.a)({},e),{},{fetching:t.status});case H:return Object(i.a)(Object(i.a)({},e),{},{stopFetching:t.status});case D:return Object(i.a)(Object(i.a)({},e),{},{preloader:t.status});case G:return Object(i.a)(Object(i.a)({},e),{},{searchFinished:t.status});case V:return Object(i.a)(Object(i.a)({},e),{},{error:t.error});default:return e}},Q=a(31),Y=a.n(Q),Z={setSearchValue:function(e,t,a){return{type:C,value:e,category:t,sortingBy:a}},getSearchResultThunk:W,setStartIndex:X,clearSearchResult:function(){return{type:T}},setPreloader:J,setFetching:z},$=Object(x.b)((function(e){return{search:e.searchResultPage.search,startIndex:e.searchResultPage.startIndex,paginationStep:e.searchResultPage.paginationStep,stopFetching:e.searchResultPage.stopFetching}}),Z)((function(e){return Object(g.jsxs)("div",{className:Y.a.search,children:[Object(g.jsx)("div",{className:Y.a.search__title,children:"Book Search App"}),Object(g.jsx)("div",{className:Y.a.search__input,children:Object(g.jsx)(k,{search:e.search,setSearchValue:e.setSearchValue,getSearchResultThunk:e.getSearchResultThunk,startIndex:e.startIndex,paginationStep:e.paginationStep,setStartIndex:e.setStartIndex,clearSearchResult:e.clearSearchResult,setPreloader:e.setPreloader,setFetching:e.setFetching,stopFetching:e.stopFetching})})]})})),ee=a.p+"static/media/preloader.ce3cfbdd.gif",te=a(36),ae=a.n(te),re=function(e){return Object(g.jsx)("div",{className:ae.a.parent,children:Object(g.jsx)("img",{src:ee,className:ae.a.preloader})})},oe=a(20),ce=a(18),ne=a(48),se="book-searching/bookPage-reducer/SET_BOOK_DATA",ie="book-searching/bookPage-reducer/SET_PRELOADER",le="book-searching/bookPage-reducer/SET_ERROR",ue={bookData:{volumeInfo:{title:"",authors:[],description:"",categories:[],imageLinks:{}}},preloader:!1,error:""},_e=function(e){return{type:ie,status:e}},he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case se:return Object(i.a)(Object(i.a)({},e),{},{bookData:t.data});case ie:return Object(i.a)(Object(i.a)({},e),{},{preloader:t.status});case le:return Object(i.a)(Object(i.a)({},e),{},{error:t.error});default:return e}},de=Object(ce.b)({searchResultPage:K,bookPage:he}),be=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ce.c,ge=Object(ce.d)(de,be(Object(ce.a)(ne.a))),je=ge;window.store=ge;var me=a(17),pe=a.n(me),fe=a.p+"static/media/noImage.9f5d0730.png",Oe={getBookDataThunk:function(e){return function(){var t=Object(P.a)(S.a.mark((function t(a){var r,o;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(_e(!0)),t.prev=1,t.next=4,B(e);case 4:(r=t.sent).data.id?a((c=r.data,{type:se,data:c})):alert(r.error.message),a(_e(!1)),t.next=14;break;case 9:t.prev=9,t.t0=t.catch(1),a(_e(!1)),o=t.t0.response.data.error.message,a({type:le,error:o});case 14:case"end":return t.stop()}var c}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()}},ke=Object(ce.c)(Object(x.b)((function(e){return{volumeInfo:e.bookPage.bookData.volumeInfo}}),Oe),O.g)((function(e){var t,a=e.match.params.id,o=e.volumeInfo.categories?e.volumeInfo.categories.join("/"):"no category",c=e.volumeInfo.title?e.volumeInfo.title:"no title",n=e.volumeInfo.authors?e.volumeInfo.authors.join(", "):"no authors",s=e.volumeInfo.description?e.volumeInfo.description:"no description";return t=e.volumeInfo.imageLinks&&e.volumeInfo.imageLinks.medium?e.volumeInfo.imageLinks.medium:fe,Object(r.useEffect)((function(){e.getBookDataThunk(a)}),[]),Object(g.jsxs)("div",{className:pe.a.bookPage,children:[Object(g.jsx)("div",{className:pe.a.bookPage__image,children:Object(g.jsx)("img",{src:t,alt:"book-image"})}),Object(g.jsxs)("div",{className:pe.a.bookPage__info,children:[Object(g.jsx)("div",{className:pe.a.bookPage__categories,children:o}),Object(g.jsx)("div",{className:pe.a.bookPage__title,children:c}),Object(g.jsx)("div",{className:pe.a.bookPage__authors,children:n}),Object(g.jsx)("div",{className:pe.a.bookPage__description,children:s})]})]})})),xe=a(15),ve=a.n(xe),Ie=function(e){var t,a;return t=e.title.length<58?e.title:e.title.slice(0,58)+"...",a=e.authors.length<80?e.authors:e.authors.slice(0,80)+"...",Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(oe.b,{to:"/book"+e.id,className:ve.a.link,children:Object(g.jsx)("div",{className:ve.a.bookItem,children:Object(g.jsxs)("div",{className:ve.a.bookItem__wrapper,children:[Object(g.jsxs)("div",{className:ve.a.bookItem__info,children:[Object(g.jsx)("div",{className:ve.a.bookItem__image,children:Object(g.jsx)("img",{src:e.image})}),Object(g.jsx)("div",{className:ve.a.bookItem__authors,children:a}),Object(g.jsx)("div",{className:ve.a.bookItem__title,children:t})]}),Object(g.jsx)("div",{className:ve.a.bookItem__categories,children:e.category})]})})})})},Se=a(32),Pe=a.n(Se),Re={getSearchResultThunk:W,setStartIndex:X,setFetching:z},ye=Object(x.b)((function(e){return{items:e.searchResultPage.items,totalItems:e.searchResultPage.totalItems,search:e.searchResultPage.search,startIndex:e.searchResultPage.startIndex,paginationStep:e.searchResultPage.paginationStep,fetching:e.searchResultPage.fetching,preloader:e.searchResultPage.preloader,stopFetching:e.searchResultPage.stopFetching,searchFinished:e.searchResultPage.searchFinished}}),Re)((function(e){var t=e.search.value,a=e.search.category,o=e.search.sortingBy,c=e.items.map((function(e){return Object(g.jsx)("div",{children:Object(g.jsx)(Ie,{image:e.volumeInfo.imageLinks?e.volumeInfo.imageLinks.thumbnail:null,category:e.volumeInfo.categories?e.volumeInfo.categories[0]:"",title:e.volumeInfo.title?e.volumeInfo.title:"",authors:e.volumeInfo.authors?e.volumeInfo.authors.join(", "):"",id:e.id})},e.etag)}));Object(r.useEffect)((function(){return document.addEventListener("scroll",n),function(){document.removeEventListener("scroll",n)}}),[]);var n=function(){document.documentElement.getBoundingClientRect().bottom<document.documentElement.clientHeight+100&&e.setFetching(!0)};return Object(r.useEffect)((function(){e.fetching&&!e.stopFetching&&(e.getSearchResultThunk(t,e.paginationStep,e.startIndex,o,a),e.setStartIndex(e.startIndex+e.paginationStep))}),[e.fetching]),Object(g.jsxs)("div",{className:Pe.a.searchResult,children:[e.searchFinished?Object(g.jsxs)("div",{className:Pe.a.searchResult__count,children:["Found ",e.totalItems," results"]}):null,Object(g.jsx)("div",{className:Pe.a.searchResult__grid,children:c})]})})),Ne=Object(x.b)((function(e){return{preloaderContent:e.searchResultPage.preloader,preloaderBookPage:e.bookPage.preloader,errorGetBooks:e.searchResultPage.error,errorGetSingleBook:e.bookPage.error}}),null)((function(e){return e.errorGetBooks&&alert(e.errorGetBooks),e.errorGetSingleBook&&alert(e.errorGetSingleBook),Object(g.jsxs)("div",{className:s.a.app,children:[e.preloaderContent||e.preloaderBookPage?Object(g.jsx)("div",{className:s.a.app__preloader,children:Object(g.jsx)(re,{})}):null,Object(g.jsx)($,{}),Object(g.jsx)("div",{className:s.a.app__content,children:Object(g.jsxs)(O.c,{children:[Object(g.jsx)(O.a,{exact:!0,path:"/",render:function(){return Object(g.jsx)(ye,{})}}),Object(g.jsx)(O.a,{path:"/book:id?",render:function(){return Object(g.jsx)(ke,{})}})]})})]})})),Ee=function(){return Object(g.jsx)(oe.a,{children:Object(g.jsx)(x.a,{store:je,children:Object(g.jsx)(Ne,{})})})},Be=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,81)).then((function(t){var a=t.getCLS,r=t.getFID,o=t.getFCP,c=t.getLCP,n=t.getTTFB;a(e),r(e),o(e),c(e),n(e)}))};c.a.render(Object(g.jsx)(Ee,{}),document.getElementById("root")),Be()}},[[80,1,2]]]);
//# sourceMappingURL=main.a11d104c.chunk.js.map